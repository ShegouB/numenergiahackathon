<!-- templates/report_template.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Rapport de Simulation NUMENERGIA</title>
    <style>
        @page { size: A4; margin: 1.5cm; }
        body { font-family: 'Helvetica', sans-serif; font-size: 11pt; color: #333; }
        h1 { color: #28a745; text-align: center; border-bottom: 2px solid #28a745; padding-bottom: 10px; }
        h2 { color: #007bff; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-top: 30px; }
        .section { margin-bottom: 25px; }
        .metric { display: -weasy-table; width: 100%; border-bottom: 1px solid #f0f0f0; padding: 8px 0; }
        .metric span { display: -weasy-table-cell; }
        .metric strong { display: -weasy-table-cell; text-align: right; font-size: 12pt; }
        .footer { text-align: center; position: fixed; bottom: -20px; left: 0; right: 0; font-size: 9pt; color: #888; }
    </style>
</head>
<body>
    <div class="footer">Rapport généré par la plateforme NUMENERGIA</div>
    <h1>Rapport de Simulation de Pompage Solaire</h1>
    
    <div class="section">
        <h2>Recommandation Technique</h2>
        <div class="metric"><span>Puissance Solaire Requise:</span> <strong>{{ data.technical.puissance_requise_kwc }} kWc</strong></div>
        <div class="metric"><span>Puissance Pompe Suggérée:</span> <strong>{{ data.technical.puissance_pompe_kw }} kW</strong></div>
        <div class="metric"><span>Irradiation Solaire Locale:</span> <strong>{{ data.technical.irradiation_locale_kwh_m2 }} kWh/m²/jour</strong></div>
        <div class="metric"><span>Besoin Énergétique Journalier:</span> <strong>{{ data.technical.energie_journaliere_kwh }} kWh/jour</strong></div>
    </div>

    {% if data.financials %}
    <div class="section">
        <h2>Analyse Financière Prévisionnelle</h2>
        <div class="metric"><span>Investissement Total Estimé:</span> <strong>{{ data.financials.total_investment|floatformat:2 }} €</strong></div>
        <div class="metric"><span>Coût Actualisé de l'Énergie (LCOE):</span> <strong>{{ data.financials.lcoe }} €/kWh</strong></div>
        <div class="metric"><span>Économies annuelles vs. Générateur Diesel:</span> <strong>~ {{ data.financials.cost_vs_diesel_per_year|floatformat:0 }} €</strong></div>
    </div>
    {% endif %}

    {% if data.components %}
    <div class="section">
        <h2>Configuration Matériel Suggérée</h2>
        <div class="metric"><span>Type de Panneaux:</span> <strong>{{ data.components.panel_model }}</strong></div>
        <div class="metric"><span>Quantité de Panneaux:</span> <strong>{{ data.components.panel_quantity }} unités</strong></div>
        <div class="metric"><span>Type de Pompe:</span> <strong>{{ data.components.pump_model }}</strong></div>
    </div>
    {% endif %}
</body>
</html>
